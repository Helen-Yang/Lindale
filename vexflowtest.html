<!DOCTYPE html>
<html>
<head>
  <title>The VexFlow Tutorial</title>
  <link href='http://fonts.googleapis.com/css?family=OFL+Sorts+Mill+Goudy+TT|Yanone+Kaffeesatz|Tangerine'
   rel='stylesheet' type='text/css'>
  <link href="http://www.vexflow.com/vextab/style.css" media="screen" rel="Stylesheet" type="text/css" />

  <!-- VexFlow Compiled Source -->
  <script src="http://www.vexflow.com/support/vexflow-debug.js"></script>
  <script src="www.vexflow.com/support/vexflow-min.js"></script>

  <!-- Support Sources -->
  <script src="http://code.jquery.com/jquery-2.1.0.min.js"></script>

  <style type="text/css">
    canvas {
      background: #eed;
      padding: 10px;
      border: 10px solid #ddc;
    }

    div.egcode {
      font-family: Courier;
      font-size: 14px;
    }
  </style>

  <script>
    /* Take raw javascript code, and return moderately useful HTML */
    

    /*
       Find all the javascript examples and copy their source code
       into the associated <code> blocks.
    */
    $(function() {
      $("div.description").each(function(index, sel) {
        codes = $(sel).find("code.example");
        codes.each(function(i, s) {
          var example = $(s).attr("example");
          var code = $($(sel).find(
            "div.example." + example + " script")[0]).html();
          $(s).html(prettify_code(code));
         })
      })
    })
  </script>
</head>

<body>
  
  <div class="content">
    
    <h2>Step 1: The Basics</h2>

    <div class="description one">
    
      <div class="example a" example="a">
        <canvas width=525 height=120></canvas>
     
        <script>
  var canvas = $("div.one div.a canvas")[0];
  var renderer = new Vex.Flow.Renderer(canvas,
    Vex.Flow.Renderer.Backends.CANVAS);

  var ctx = renderer.getContext();
  var stave = new Vex.Flow.Stave(10, 0, 500);
  stave.addClef("treble").setContext(ctx).draw();
        </script>
      </div>
     
    </div>
    <h2>Step 2: Add Some Notes</h2>
    <div class="description two">
     
      <code class="example a" example="a"></code>
      <div class="example a" example="a">
        <canvas width=525 height=120></canvas>
        <p/>
        <script>
  var canvas = $("div.two div.a canvas")[0];
  var renderer = new Vex.Flow.Renderer(canvas,
    Vex.Flow.Renderer.Backends.CANVAS);

  var ctx = renderer.getContext();
  var stave = new Vex.Flow.Stave(10, 0, 500);
  stave.addClef("treble").setContext(ctx).draw();

  // Create the notes
  var notes = [
    // A quarter-note C.
    new Vex.Flow.StaveNote({ keys: ["c/4"], duration: "q" }),

    // A quarter-note D.
    new Vex.Flow.StaveNote({ keys: ["d/4"], duration: "q" }),

    // A quarter-note rest. Note that the key (b/4) specifies the vertical
    // position of the rest.
    new Vex.Flow.StaveNote({ keys: ["b/4"], duration: "qr" }),

    // A C-Major chord.
    new Vex.Flow.StaveNote({ keys: ["c/4", "e/4", "g/4"], duration: "q" })
  ];

  // Create a voice in 4/4
  var voice = new Vex.Flow.Voice({
    num_beats: 4,
    beat_value: 4,
    resolution: Vex.Flow.RESOLUTION
  });

  // Add notes to voice
  voice.addTickables(notes);

  // Format and justify the notes to 500 pixels
  var formatter = new Vex.Flow.Formatter().
    joinVoices([voice]).format([voice], 500);

  // Render voice
  voice.draw(ctx, stave);
        </script>
      </div>
      
      <p/>
     
      <br/>
      <code class="example b" example="b"></code>
      <div class="example b" example="b">
        <canvas width=525 height=120></canvas>
        <p/>
        <script>
  var canvas = $("div.two div.b canvas")[0];
  var renderer = new Vex.Flow.Renderer(canvas,
    Vex.Flow.Renderer.Backends.CANVAS);

  var ctx = renderer.getContext();
  var stave = new Vex.Flow.Stave(10, 0, 500);

  // Add a treble clef
  stave.addClef("treble");
  stave.setContext(ctx).draw();

  // Create a quarter E, a half D, and a quarter C-Major chord.
  var notes = [
    new Vex.Flow.StaveNote({ keys: ["e/5"], duration: "q" }),
    new Vex.Flow.StaveNote({ keys: ["d/5"], duration: "h" }),
    new Vex.Flow.StaveNote({ keys: ["c/5", "e/5", "g/5"], duration: "q" })
  ];

  // Create a second voice, with just one whole note
  var notes2 = [
    new Vex.Flow.StaveNote({ keys: ["c/4"], duration: "w" })
  ];

  // Create a voice in 4/4
  function create_4_4_voice() {
    return new Vex.Flow.Voice({
      num_beats: 4,
      beat_value: 4,
      resolution: Vex.Flow.RESOLUTION
    });
  }

  // Create voices and add notes to each of them.
  var voice = create_4_4_voice().addTickables(notes);
  var voice2 = create_4_4_voice().addTickables(notes2);

  // Format and justify the notes to 500 pixels
  var formatter = new Vex.Flow.Formatter().
    joinVoices([voice, voice2]).format([voice, voice2], 500);

  // Render voice
  voice.draw(ctx, stave);
  voice2.draw(ctx, stave);
</script>
      </div>

    </div>
    <h2>Step 3: All About Modifiers</h2>
    <div class="description three">
      
      <code class="example a" example="a"></code>
      <div class="example a" example="a">
        <canvas width=525 height=120></canvas>
        <p/>
        <script>
  var canvas = $("div.three div.a canvas")[0];
  var renderer = new Vex.Flow.Renderer(canvas,
    Vex.Flow.Renderer.Backends.CANVAS);

  var ctx = renderer.getContext();
  var stave = new Vex.Flow.Stave(10, 0, 500);

  // Add a treble clef
  stave.addClef("treble");
  stave.setContext(ctx).draw();

  var notes = [
    // Dotted eighth E##
    new Vex.Flow.StaveNote({ keys: ["e##/5"], duration: "8d" }).
      addAccidental(0, new Vex.Flow.Accidental("##")).addDotToAll(),

    // Sixteenth Eb
    new Vex.Flow.StaveNote({ keys: ["eb/5"], duration: "16" }).
      addAccidental(0, new Vex.Flow.Accidental("b")),

    // Half D
    new Vex.Flow.StaveNote({ keys: ["d/5"], duration: "h" }),

    // Quarter Cm#5
    new Vex.Flow.StaveNote({ keys: ["c/5", "eb/5", "g#/5"], duration: "q" }).
      addAccidental(1, new Vex.Flow.Accidental("b")).
      addAccidental(2, new Vex.Flow.Accidental("#"))
  ];

  // Helper function to justify and draw a 4/4 voice
  Vex.Flow.Formatter.FormatAndDraw(ctx, stave, notes);
</script>
      </div>
      
      <p/>
    
      <ul>
        <li>We don't want to couple rendering logic with notational logic.</li>
        <li>
          
        </li>
      </ul>
      <p/>
      
      <p/>
     
      <p/>
      
      <div class="example b" example="b">
        <canvas width=525 height=120></canvas>
        <p/>
        <script>
  var canvas = $("div.three div.b canvas")[0];
  var renderer = new Vex.Flow.Renderer(canvas,
    Vex.Flow.Renderer.Backends.CANVAS);

  var ctx = renderer.getContext();
  var stave = new Vex.Flow.Stave(10, 0, 500);

  // Add a treble clef
  stave.addClef("treble");
  stave.setContext(ctx).draw();

  var notes = [
    new Vex.Flow.StaveNote(
      { keys: ["g/4", "b/4", "cb/5", "e/5", "g#/5", "b/5"],
        duration: "h" }).
      addAccidental(0, new Vex.Flow.Accidental("bb")).
      addAccidental(1, new Vex.Flow.Accidental("b")).
      addAccidental(2, new Vex.Flow.Accidental("#")).
      addAccidental(3, new Vex.Flow.Accidental("n")).
      addAccidental(4, new Vex.Flow.Accidental("b")).
      addAccidental(5, new Vex.Flow.Accidental("##")),
    new Vex.Flow.StaveNote({ keys: ["c/4"], duration: "h" })
  ];

  // Helper function to justify and draw a 4/4 voice
  Vex.Flow.Formatter.FormatAndDraw(ctx, stave, notes);
</script>
    </div>

    
      <code>
        Accidental.applyAccidentals([voice], "Cb");
      </code>
    </div>

    <h2>Step 3.5: An Interlude</h2>
    
    <p/>
    
    <center>
      <a href="https://github.com/0xfe/vexflow/blob/master/src/tables.js">
      VexFlow Tables (vexflow/src/tables.js)
    </a>
    </center>
    <p/>
    The following tables are available:
    <p/>
    <ul>
      <li>
        <code>Vex.Flow.keyProperties.note_values</code> -
          The list of valid note names.
      </li>
      <li>
      <code>Vex.Flow.accidentalCodes.accidentals</code> -
          The list of valid accidental names.
      </li>
      <li><code>Vex.Flow.keySignatures.keySpecs</code> -
        The list of valid keys.</li>
      <li><code>Vex.Flow.durationToTicks</code> -
        The list of valid duration codes.</li>
    </ul>

    <h2>Step 4: Beams and Ties</h2>
    <div class="description four">
      
      <p/>
      
      <br/>
      <code class="example a" example="a"></code>
      <div class="example a" example="a">
        <canvas width=525 height=120></canvas>
        <p/>
        <script>
  var canvas = $("div.four div.a canvas")[0];
  var renderer = new Vex.Flow.Renderer(canvas,
    Vex.Flow.Renderer.Backends.CANVAS);

  var ctx = renderer.getContext();
  var stave = new Vex.Flow.Stave(10, 0, 500);

  // Add a treble clef
  stave.addClef("treble");
  stave.setContext(ctx).draw();

  var notes = [
    new Vex.Flow.StaveNote({ keys: ["e##/5"], duration: "8d" }).
      addAccidental(0, new Vex.Flow.Accidental("##")).addDotToAll(),
    new Vex.Flow.StaveNote({ keys: ["b/4"], duration: "16" }).
      addAccidental(0, new Vex.Flow.Accidental("b"))
  ];

  var notes2 = [
    new Vex.Flow.StaveNote({ keys: ["c/4"], duration: "8" }),
    new Vex.Flow.StaveNote({ keys: ["d/4"], duration: "16" }),
    new Vex.Flow.StaveNote({ keys: ["e/4"], duration: "16" }).
      addAccidental(0, new Vex.Flow.Accidental("b"))
  ];

  var notes3 = [
    new Vex.Flow.StaveNote({ keys: ["d/4"], duration: "16" }),
    new Vex.Flow.StaveNote({ keys: ["e/4"], duration: "16" }).
      addAccidental(0, new Vex.Flow.Accidental("#")),
    new Vex.Flow.StaveNote({ keys: ["g/4"], duration: "32" }),
    new Vex.Flow.StaveNote({ keys: ["a/4"], duration: "32" }),
    new Vex.Flow.StaveNote({ keys: ["g/4"], duration: "16" })
  ];

  var notes4 = [ new Vex.Flow.StaveNote({ keys: ["d/4"], duration: "q" }) ];

  // Create the beams
  var beam = new Vex.Flow.Beam(notes);
  var beam2 = new Vex.Flow.Beam(notes2);
  var beam3 = new Vex.Flow.Beam(notes3);

  var all_notes = notes.concat(notes2).concat(notes3).concat(notes4);

  // Helper function to justify and draw a 4/4 voice
  Vex.Flow.Formatter.FormatAndDraw(ctx, stave, all_notes);

  // Render beams
  beam.setContext(ctx).draw();
  beam2.setContext(ctx).draw();
  beam3.setContext(ctx).draw();
</script>
    </div>
    
    <p/>
    
    <p/>
    For example:
      <br/>
      <code class="example b" example="b"></code>
      <div class="example b" example="b">
        <canvas width=525 height=120></canvas>
        <p/>
        <script>
  var canvas = $("div.four div.b canvas")[0];
  var renderer = new Vex.Flow.Renderer(canvas,
    Vex.Flow.Renderer.Backends.CANVAS);

  var ctx = renderer.getContext();
  var stave = new Vex.Flow.Stave(10, 0, 500);

  // Add a treble clef
  stave.addClef("treble");
  stave.setContext(ctx).draw();

  var notes = [
    new Vex.Flow.StaveNote({ keys: ["e##/5"], duration: "8d" }).
      addAccidental(0, new Vex.Flow.Accidental("##")).addDotToAll(),
    new Vex.Flow.StaveNote({ keys: ["b/4"], duration: "16" }).
      addAccidental(0, new Vex.Flow.Accidental("b"))
  ];

  var notes2 = [
    new Vex.Flow.StaveNote({ keys: ["b/4"], duration: "8" }),
    new Vex.Flow.StaveNote({ keys: ["d/4"], duration: "16" }),
    new Vex.Flow.StaveNote({ keys: ["c/4", "e/4"], duration: "16" }).
      addAccidental(0, new Vex.Flow.Accidental("b"))
  ];

  var notes3 = [
    new Vex.Flow.StaveNote({ keys: ["c/4", "e/4"], duration: "8" }),
    new Vex.Flow.StaveNote({ keys: ["e/4"], duration: "8" }).
      addAccidental(0, new Vex.Flow.Accidental("#"))
  ];

  var notes4 = [ 
    new Vex.Flow.StaveNote({ keys: ["d/4"], duration: "8" }),
    new Vex.Flow.StaveNote({ keys: ["e/4"], duration: "8" }),
  ];

  // Create the beams
  var beam = new Vex.Flow.Beam(notes);
  var beam2 = new Vex.Flow.Beam(notes2);
  var beam3 = new Vex.Flow.Beam(notes3);
  var beam4 = new Vex.Flow.Beam(notes4);

  // Create a tie between the last note of the first group and the
  // first note of the last group.
  var tie = new Vex.Flow.StaveTie({
    first_note: notes[1],
    last_note: notes2[0],
    first_indices: [0],
    last_indices: [0]
  });

  // Create another tie between the two chords in the tune
  var tie2 = new Vex.Flow.StaveTie({
    first_note: notes2[2],
    last_note: notes3[0],
    first_indices: [0, 1],
    last_indices: [0, 1]
  });

  var all_notes = notes.concat(notes2).concat(notes3).concat(notes4);

  // Helper function to justify and draw a 4/4 voice
  Vex.Flow.Formatter.FormatAndDraw(ctx, stave, all_notes);

  // Render beams
  beam.setContext(ctx).draw();
  beam2.setContext(ctx).draw();
  beam3.setContext(ctx).draw();
  beam4.setContext(ctx).draw();

  // Render ties
  tie.setContext(ctx).draw();
  tie2.setContext(ctx).draw();
</script>
    </div>
    And there you have ties and beams!
  </div>

    <h2>Step 5: Guitar Tablature</h2>
    <div class="description five">
      
      <p/>Let's write some tab.
      <br/>
      <code class="example a" example="a"></code>
      <div class="example a" example="a">
        <canvas width=525 height=160></canvas>
        <p/>
        <script>
  // Get the rendering context
  var canvas = $("div.five div.a canvas")[0];
  var renderer = new Vex.Flow.Renderer(canvas,
    Vex.Flow.Renderer.Backends.CANVAS);
  var ctx = renderer.getContext();
  ctx.setFont("Arial", 10, "").setBackgroundFillStyle("#eed");

  // Create and draw the tablature stave
  var tabstave = new Vex.Flow.TabStave(10, 0, 500);
  tabstave.addTabGlyph();
  tabstave.setContext(ctx).draw();

  // Create some notes
  var notes = [
    // A single note
    new Vex.Flow.TabNote({
      positions: [{str: 3, fret: 7}],
      duration: "q"}),

    // A chord with the note on the 3rd string bent
    new Vex.Flow.TabNote({
      positions: [{str: 2, fret: 10},
                  {str: 3, fret: 9}],
      duration: "q"}).
    addModifier(new Vex.Flow.Bend("Full"), 1),

    // A single note with a harsh vibrato
    new Vex.Flow.TabNote({
      positions: [{str: 2, fret: 5}],
      duration: "h"}).
    addModifier(new Vex.Flow.Vibrato().setHarsh(true).setVibratoWidth(70), 0)
  ];

  Vex.Flow.Formatter.FormatAndDraw(ctx, tabstave, notes);
        </script>
      </div>
      
      <p/>
      
    </div>
    <center>
    
      <p/>
      <a href="http://0xfe.blogspot.com">The Blog</a><p/>
    </center>
  </div>
</body>

</html>
