<!DOCTYPE html>
<html>
<head>
	<title>Vexflow Test 2</title>
  <script src="http://www.vexflow.com/support/vexflow-debug.js"></script>
  <script src="www.vexflow.com/support/vexflow-min.js"></script>
  <script src="http://code.jquery.com/jquery-2.1.0.min.js"></script>

</head>
<body onclick="drawNotes()">
<p>click for sheet music!</p>
<div class="description staff">
	<canvas width=525 height=200></canvas>

	<script>
		//when note changes, run draw, change counter
		//start/stop button
		
		var drawNotes = function () {
			var note = ["C/4", "C#/4", "G#/4", "G/4", "A/4", "A/4", "G/4", "C#/5"];
			var count = 0; 
			var canvas = $("div.staff canvas")[0];
			var renderer = new Vex.Flow.Renderer(canvas, Vex.Flow.Renderer.Backends.CANVAS);
			var ctx = renderer.getContext();
			var stave = new Vex.Flow.Stave(10, 0, 500);
			stave.addClef("treble").setContext(ctx).draw();
			var plum = [];
			
			for(var i = 0; i<note.length; i++){
				if (note[i].substring(1,2)==="#"){
					console.log("in the if statement");
					note[i] = note[i].substring(0,1)+ note[i].substring(2);
					console.log("the new substring thing", note[i]);
					var apple = new Vex.Flow.StaveNote({keys:[note[i]], duration:"q"}).addAccidental(0, new Vex.Flow.Accidental("#"));
				} else {
				var apple = new Vex.Flow.StaveNote({keys: [note[i]], duration: "q"});
				
				}
				plum.push(apple);
			}

			var notes = [];
			for (var num = 0; num < plum.length; num++) {
				notes.push(plum[num]);
			};
			
			// notes = [
			// 	// plum[0],
			// 	// plum[1],

			// 	// new Vex.Flow.StaveNote({keys: ["c/4"], duration: "q"}), 
			// 	// new Vex.Flow.StaveNote({keys: ["d/4"], duration: "q"}),
			// 	// new Vex.Flow.StaveNote({keys: [note[0]], duration: "q"}),

			// ];
			var voice = new Vex.Flow.Voice({
				num_beats: plum.length, 
				beat_value: 4,
				resolution: Vex.Flow.RESOLUTION
			});
			voice.addTickables(notes);

			var formatter = new Vex.Flow.Formatter().joinVoices([voice]).format([voice], 500);

			voice.draw(ctx, stave);
		};//end of draw function
	</script>
</div>
</body>
</html>